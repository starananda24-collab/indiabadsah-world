<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BHOLA NATH BASAK</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:linear-gradient(to right, #1a2a6c, #b21f1f, #fdbb2d); color:white;}
  header { text-align:center; padding:20px; background:rgba(0,0,0,0.6);}
  header img { width:180px; height:180px; object-fit:cover; border-radius:50%; border:5px solid #fff;}
  nav { display:flex; justify-content:center; background:rgba(0,0,0,0.8); flex-wrap:wrap; padding:8px;}
  nav a, nav input[type=text] { color:white; text-decoration:none; padding:10px 15px; margin:5px; border-radius:5px; border:none;}
  nav a:hover { background:#fbd46d; color:black;}
  nav input[type=text] { width:200px; color:black; padding:6px; border-radius:5px;}
  section { padding:20px; max-width:900px; margin:20px auto; background:rgba(255,255,255,0.1); border-radius:12px;}
  h2 { color:#ffe66d;}
  input, select { width:95%; padding:10px; margin:8px 0; border-radius:5px; border:none;}
  button { padding:10px 20px; margin:10px 5px; border:none; border-radius:5px; cursor:pointer;}
  button.submit-btn { background:#4CAF50; color:white;}
  button.cancel-btn { background:#f44336; color:white;}
  button.logout-btn { background:#ff6600; color:white; margin-top:10px;}
  footer { text-align:center; padding:10px; font-size:14px; background:rgba(0,0,0,0.7); position:fixed; bottom:0; width:100%;}
  footer a { color:#fbd46d; margin:0 8px; text-decoration:none; font-weight:bold;}
  footer a:hover { color:white;}
  table { width:100%; border-collapse: collapse; margin-top:15px;}
  th,td { border:1px solid #fff; padding:8px; text-align:left;}
  th { background: rgba(0,0,0,0.6);}
  .status-pending { background:pink;}
  .status-accepted { background:green; color:white;}
  .status-rejected { background:red; color:white;}
  .status-deleted { background:gray; color:white;}
  .action-btn { padding:5px 10px; margin:2px; border-radius:5px; cursor:pointer; border:none;}
  .action-accept { background:#4CAF50; color:white;}
  .action-reject { background:#f44336; color:white;}
  .action-delete { background:#555; color:white;}
  .about-panel { background:linear-gradient(to right, #1e3c72, #2a5298); color:white; padding:15px; border-radius:12px; margin-bottom:20px;}
  #dynamicForm { background:white; color:black; padding:20px; border-radius:12px; max-width:600px; margin:20px auto; display:none; border:2px solid red; }
  #dynamicForm input, #dynamicForm select { width:95%; padding:8px; margin:6px 0; border-radius:5px; border:1px solid #ccc; color:black;}
  #dynamicForm button { margin:5px; }
  @media (max-width:720px){ nav{flex-direction:column;} nav input[type=text]{width:90%} }
</style>
</head>
<body>

<header>
  <img src="myphoto.jpg" alt="BHOLA NATH BASAK">
  <h1>BHOLA NATH BASAK</h1>
</header>

<nav>
  <a href="#about">About Me</a>
  <a href="#" id="visitorLink">Visitor Form</a>
  <a href="#adminLogin">Admin Login</a>
  <input type="text" id="searchVisitor" placeholder="Search by Appointment No" aria-label="Search appointment (by number)">
</nav>

<section id="about">
  <h2>About Me</h2>
  <div class="about-panel">
    <h3>Profile</h3>
    <p>I am BHOLA NATH BASAK, a dedicated professional with expertise in leadership and management. My focus is on continuous development, strategic planning, and fostering growth for myself and others in diverse business environments. I am married to Asha Basak since 2016, and we have a daughter named Sonakshi Basak, born on 29th November 2021 in Krishnagar. I emphasize ethical leadership, community contribution, and lifelong learning, integrating cultural awareness, innovative thinking, and hands-on experience to achieve sustainable results and nurture talent across business and social domains.</p>

    <h3>Personal Details</h3>
    <p><strong>Date of Birth:</strong> 24-03-1988</p>
    <p><strong>Place of Birth:</strong> Kolkata, India</p>
    <p><strong>Father Name:</strong> Sankar Lal Basak</p>
    <p><strong>Mother Name:</strong> Anima Basak</p>
    <p><strong>Married:</strong> 2016 with Asha Basak</p>
    <p><strong>Children:</strong> 1 daughter - Sonakshi Basak, born 29th November 2021, Krishnagar</p>

    <h3>Education</h3>
    <p>Bhola Nath Basak completed a Bachelor of Arts degree followed by an MBA in Business Administration. Across his academic journey he focused on strategic management, finance, organizational behaviour, marketing and operations. He participated in practical projects and case studies that sharpened analytical skills and decision-making ability—combining theory with real-world applications. Continuous learning remains central to his approach, ensuring he keeps up with industry trends and best practices, applying evidence-based frameworks to drive measurable outcomes in organizations and community initiatives.</p>

    <h3>Culture</h3>
    <p>Growing up in India instilled in him appreciation for cultural diversity, respect for elders, community bonding, and empathy. Cultural exposure taught him the importance of listening, consensus, and inclusive leadership. These principles are applied in professional life through collaborative decision-making, sensitivity to diverse perspectives, and ethical conduct. Cultural awareness strengthens stakeholder engagement and enables him to design solutions that are context-aware and socially responsible—bridging tradition with modern practices to support both innovation and continuity.</p>

    <h3>Hobbies</h3>
    <p>His hobbies include reading, creative writing, listening to and creating music, traveling to new places, exploring technology trends, and mentoring aspiring professionals. These pursuits foster creativity, broaden perspectives, improve communication, and maintain well-being—fueling the curiosity and resilience needed for complex problem solving and leadership.</p>

    <h3>Thoughts & Achievements</h3>
    <p>He believes in ethical leadership, continuous improvement and measurable impact. Achievements include leading process-improvement initiatives, mentoring teams to achieve higher performance, and contributing to community development programs. His approach blends strategic thinking with empathy, ensuring durable, people-centered outcomes and long-term growth for organizations and individuals.</p>

    <h3>Interests</h3>
    <p>He is interested in business analytics, leadership development, organizational transformation and cross-cultural collaboration. By staying curious and learning continuously, he applies new ideas to help organizations adapt and thrive.</p>
  </div>
</section>

<!-- Visitor form -->
<section id="dynamicForm" aria-labelledby="visitorFormHeader" style="display:none;">
  <h2 id="visitorFormHeader">Visitor Appointment Form</h2>
  <form id="formVisitor">
    <label>Visitor Name</label>
    <input type="text" id="visitorName" required>
    <label>Father Name</label>
    <input type="text" id="fatherName" required>
    <label>Visitor DOB</label>
    <input type="date" id="dob" required>
    <label>Visitor Address</label>
    <input type="text" id="address" required>
    <label>Country</label>
    <select id="country" required>
      <option value="India (+91)">India (+91)</option>
      <option value="USA (+1)">USA (+1)</option>
      <option value="UK (+44)">UK (+44)</option>
      <option value="Canada (+1)">Canada (+1)</option>
      <option value="Australia (+61)">Australia (+61)</option>
      <option value="Germany (+49)">Germany (+49)</option>
      <option value="France (+33)">France (+33)</option>
      <option value="UAE (+971)">UAE (+971)</option>
      <option value="Saudi Arabia (+966)">Saudi Arabia (+966)</option>
      <option value="Other">Other</option>
    </select>
    <label>Visit Date</label>
    <input type="date" id="visitDate" required>
    <label>Visit Time</label>
    <input type="time" id="visitTime" required>
    <label>Contact Number</label>
    <input type="tel" id="contactNumber" required>
    <label>Passport Number</label>
    <input type="text" id="passport">
    <label>Email</label>
    <input type="email" id="email" required>
    <button type="submit" class="submit-btn">Submit</button>
    <button type="button" class="cancel-btn" id="cancelFormBtn">Cancel</button>
  </form>
</section>

<section id="adminLogin">
  <h2>Admin Login</h2>
  <form id="formAdmin">
    <label>Username</label>
    <input type="text" id="adminUsername" required>
    <label>Password</label>
    <input type="password" id="adminPassword" required>
    <button type="submit">Login</button>
  </form>
  <button id="logoutBtn" class="logout-btn" style="display:none;" onclick="logoutAdmin()">Logout</button>

  <div id="adminDashboard" style="display:none;">
    <h2>Visitor Details</h2>
    <table id="visitorTable">
      <thead>
        <tr>
          <th>Name</th><th>DOB</th><th>Father</th><th>Address</th>
          <th>Country</th><th>Visit Date</th><th>Visit Time</th>
          <th>Contact</th><th>Passport</th><th>Email</th>
          <th>Appointment</th><th>Status</th><th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<footer>
  <span>Contact:</span>
  <a href="https://facebook.com/" target="_blank">Facebook</a>
  <a href="https://linkedin.com/" target="_blank">LinkedIn</a>
  <a href="https://instagram.com/" target="_blank">Instagram</a>
  <a href="mailto:starananda24@gmail.com">Email</a>
  <br>
  &copy; 2025 BHOLA NATH BASAK
</footer>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwx-A1wmW5-kdB5mn1SQFcbyF6PnSCpddfmMGAjbzgXZUzfQfmJMz6MHwkjrMdrCyNtRg/exec";
const ADMIN_WHATSAPP = "+971506309833";

// Utility functions
function generateAppointmentNumber(){
  let last = parseInt(localStorage.getItem('lastAppt') || '0', 10);
  last +=1;
  localStorage.setItem('lastAppt', last);
  return 'APMNTWBNBIND'+String(last).padStart(7,'0');
}
function escapeHtml(str){
  if(!str) return '';
  return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[s]));
}

// Show visitor form
document.getElementById('visitorLink').addEventListener('click', e=>{
  e.preventDefault();
  const formSection = document.getElementById('dynamicForm');
  formSection.style.display = 'block';
  formSection.scrollIntoView({behavior:'smooth'});
  setTimeout(()=>document.getElementById('visitorName').focus(),300);
});

// Cancel form
document.getElementById('cancelFormBtn').addEventListener('click', ()=>{
  document.getElementById('formVisitor').reset();
  document.getElementById('dynamicForm').style.display='none';
});

// Visitor form submission
document.getElementById('formVisitor').addEventListener('submit', async e=>{
  e.preventDefault();
  const name = document.getElementById('visitorName').value.trim();
  const father = document.getElementById('fatherName').value.trim();
  const dob = document.getElementById('dob').value;
  const address = document.getElementById('address').value.trim();
  const country = document.getElementById('country').value;
  const visitDate = document.getElementById('visitDate').value;
  const visitTime = document.getElementById('visitTime').value;
  const contact = document.getElementById('contactNumber').value.trim();
  const passport = document.getElementById('passport').value.trim();
  const email = document.getElementById('email').value.trim();

  // Basic validations
  if(!name || !father || !dob || !address || !visitDate || !visitTime || !contact || !email){
    alert('Please fill all required fields');
    return;
  }

  const appointmentNumber = generateAppointmentNumber();

  const payload = {
    appointmentNumber, visitorName:name, fatherName:father, dob, address, country, visitDate, visitTime, contactNumber:contact, passport, email, status:'Pending'
  };

  try{
    await fetch(WEB_APP_URL,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(payload)
    });
  }catch(err){
    console.warn(err);
  }

  alert('Appointment sent successfully! Appointment No: '+appointmentNumber);

  const msgContent = `
Visitor Name: ${name}
Father Name: ${father}
DOB: ${dob}
Address: ${address}
Country: ${country}
Visit Date: ${visitDate}
Visit Time: ${visitTime}
Contact: ${contact}
Passport: ${passport}
Email: ${email}
Appointment No: ${appointmentNumber}
`;
  // Redirect to WhatsApp
  window.open(`https://wa.me/${ADMIN_WHATSAPP}?text=${encodeURIComponent(msgContent)}`, '_blank');

  document.getElementById('formVisitor').reset();
  document.getElementById('dynamicForm').style.display='none';
});

// Admin login
document.getElementById('formAdmin').addEventListener('submit', e=>{
  e.preventDefault();
  const user = document.getElementById('adminUsername').value;
  const pass = document.getElementById('adminPassword').value;
  if(user==='admin' && pass==='admin123'){
    localStorage.setItem('adminLoggedIn','true');
    document.getElementById('formAdmin').style.display='none';
    document.getElementById('logoutBtn').style.display='inline-block';
    document.getElementById('adminDashboard').style.display='block';
    loadVisitors();
  }else{ alert('Invalid credentials'); }
});
function logoutAdmin(){
  localStorage.removeItem('adminLoggedIn');
  document.getElementById('logoutBtn').style.display='none';
  document.getElementById('adminDashboard').style.display='none';
  document.getElementById('formAdmin').style.display='block';
}

// Load visitors
async function loadVisitors(){
  if(localStorage.getItem('adminLoggedIn')!=='true') return;
  const tbody = document.querySelector('#visitorTable tbody');
  tbody.innerHTML='';

  let visitors = [];
  try{
    const resp = await fetch(WEB_APP_URL+'?action=getVisitors');
    const data = await resp.json();
    visitors = Array.isArray(data.visitors)?data.visitors:[];
  }catch(e){ console.warn(e); }

  visitors.forEach(v=>{
    const tr = document.createElement('tr');
    const status = v.status || 'Pending';
    tr.innerHTML = `
      <td>${escapeHtml(v.visitorName)}</td>
      <td>${escapeHtml(v.dob)}</td>
      <td>${escapeHtml(v.fatherName)}</td>
      <td>${escapeHtml(v.address)}</td>
      <td>${escapeHtml(v.country)}</td>
      <td>${escapeHtml(v.visitDate)}</td>
      <td>${escapeHtml(v.visitTime)}</td>
      <td>${escapeHtml(v.contactNumber)}</td>
      <td>${escapeHtml(v.passport)}</td>
      <td>${escapeHtml(v.email)}</td>
      <td>${escapeHtml(v.appointmentNumber)}</td>
      <td class="status-${status.toLowerCase()}">${escapeHtml(status)}</td>
      <td>
        <button class="action-btn action-accept" ${status==='Rejected'?'disabled':''}>Accept</button>
        <button class="action-btn action-reject" ${status==='Accepted'?'disabled':''}>Reject</button>
        <button class="action-btn action-delete">Delete</button>
      </td>
    `;
    const acceptBtn = tr.querySelector('.action-accept');
    const rejectBtn = tr.querySelector('.action-reject');
    const deleteBtn = tr.querySelector('.action-delete');
    const appt = v.appointmentNumber;

    acceptBtn.addEventListener('click', async ()=>{
      try{ await fetch(WEB_APP_URL,{method:'POST', body:JSON.stringify({appointmentNumber:appt,status:'Accepted'})}); }catch(e){console.warn(e);}
      loadVisitors();
    });
    rejectBtn.addEventListener('click', async ()=>{
      try{ await fetch(WEB_APP_URL,{method:'POST', body:JSON.stringify({appointmentNumber:appt,status:'Rejected'})}); }catch(e){console.warn(e);}
      loadVisitors();
    });
    deleteBtn.addEventListener('click', async ()=>{
      if(confirm('Do you want to delete this appointment permanently?')){
        try{ await fetch(WEB_APP_URL,{method:'POST', body:JSON.stringify({appointmentNumber:appt,status:'Deleted'})}); }catch(e){console.warn(e);}
        alert('Record deleted permanently!');
        loadVisitors();
      }
    });

    tbody.appendChild(tr);
  });
}

// Search functionality
document.getElementById('searchVisitor').addEventListener('input', e=>{
  const val = e.target.value.trim().toLowerCase();
  const rows = document.querySelectorAll('#visitorTable tbody tr');
  rows.forEach(row=>{
    const apptNo = row.cells[10].innerText.toLowerCase();
    row.style.display = apptNo.includes(val)?'':'none';
  });
});

// Auto-load admin if already logged in
if(localStorage.getItem('adminLoggedIn')==='true'){
  document.getElementById('formAdmin').style.display='none';
  document.getElementById('logoutBtn').style.display='inline-block';
  document.getElementById('adminDashboard').style.display='block';
  loadVisitors();
}
</script>

</body>
</html>
