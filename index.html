<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INDIA BADSAH</title>
<style>
body {margin:0; font-family: Arial, sans-serif; background:linear-gradient(to right,#1a2a6c,#b21f1f,#fdbb2d); color:white; line-height:1.6;}
header{text-align:center; padding:20px; background:rgba(0,0,0,0.6);}
header img{width:180px;height:180px;object-fit:cover;border-radius:50%;border:5px solid #fff;transition: transform 0.4s;}
header img:hover{transform: scale(1.05) rotate(2deg);}
header h1{margin:15px 0 0; font-size:2.5em;color:#fbd46d;text-shadow:2px 2px 5px black;}
nav{display:flex;justify-content:center;background:rgba(0,0,0,0.8);flex-wrap:wrap;align-items:center;}
nav a{color:white;text-decoration:none;padding:10px 15px;display:block;transition:background 0.3s,color 0.3s;cursor:pointer;}
nav a:hover{background:#fbd46d;color:black;border-radius:5px;}
#statusSearch {margin-left:10px;padding:5px;border-radius:5px;border:none;}
#statusResult {margin-left:10px;}
section{padding:40px 20px;max-width:900px;margin:auto;background:rgba(255,255,255,0.1);margin-bottom:30px;border-radius:12px;box-shadow:0px 4px 15px rgba(0,0,0,0.5);}
section h2{color:#ffe66d;margin-bottom:15px;}
.form-box{background:rgba(0,0,0,0.7);padding:20px;border-radius:12px;color:white;max-width:500px;margin:auto;}
.form-box label{display:block;margin-bottom:10px;}
.form-box input, .form-box select, .form-box textarea{width:100%;padding:5px;margin-top:3px;border-radius:5px;border:none;}
textarea{resize:none;height:80px;}
.btn{background:#fbd46d;color:black;padding:8px 12px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;}
.btn:hover{background:white;}
table{width:100%;border-collapse:collapse;color:black;background:white;margin-top:20px;}
table, th, td{border:1px solid #000;}
th, td{padding:8px;text-align:center;}
.green{background:#28a745;color:white;}
.red{background:#dc3545;color:white;}
.deepgreen{background:#1c7c54;color:white;}
.deepred{background:#b22222;color:white;}
.pink{background:#ff69b4;color:white;}
.yellow{background:#ffc107;color:white;}
.grey{background:#6c757d;color:white;}
.hidden{display:none;}
.chat-box{background:#fff;color:#000;padding:10px;margin-top:10px;max-height:200px;overflow:auto;border-radius:5px;}
.chat-input{margin-top:5px; display:flex;}
.chat-input textarea{flex:1;height:50px;}
.chat-input button{margin-left:5px;padding:5px 10px;}

/* Mobile Support */
@media (max-width: 600px) {
  .form-box input, .form-box select, .form-box button, .form-box textarea {width:100% !important; font-size:16px; margin-top:5px;}
  nav {flex-direction: column; align-items: flex-start;}
  #statusSearch {width:90%; margin:10px;}
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<header>
  <img src="myphoto.jpg" alt="India Badsah Photo">
  <h1>INDIA BADSAH</h1>
</header>

<nav>
  <a onclick="showSection('profile')">Profile</a>
  <a onclick="showSection('education')">Education</a>
  <a onclick="showSection('culture')">Culture</a>
  <a onclick="showSection('achievements')">Achievements</a>
  <a onclick="showSection('hobbies')">Hobbies</a>
  <a onclick="showSection('interested')">Interested About</a>
  <a onclick="showSection('thoughts')">Thoughts</a>
  <a onclick="showSection('visitor')">Visitor Form</a>
  <a onclick="showSection('adminLogin')">Admin Login</a>
  <input type="text" id="statusSearch" placeholder="Visitor Status: Enter Appt No" onkeypress="if(event.key==='Enter'){checkStatus();}">
</nav>
<div id="statusResult"></div>

<section id="profile"><h2>Profile</h2><p>I am INDIA BADSAH, a passionate learner and explorer of life’s endless opportunities. I aim to inspire others while growing myself in every possible field.</p></section>
<section id="education"><h2>Education</h2><p>Education is the foundation of growth. I gather knowledge from books and real-life experiences shaping problem-solving abilities.</p></section>
<section id="culture"><h2>Culture</h2><p>I embrace traditions, values, and respect for diversity while blending it with modern ideas for a balanced lifestyle.</p></section>
<section id="achievements"><h2>Achievements</h2><p>Every step of life is an achievement — from personal milestones to professional success, reflecting perseverance, hard work, and dedication.</p></section>
<section id="hobbies"><h2>Hobbies</h2><p>I enjoy creative and recreational activities — sports, art, music, technology. Hobbies give me balance and energy.</p></section>
<section id="interested"><h2>Interested About</h2><p>Deeply interested in innovation, leadership, and cultural understanding. Exploring new ideas and connecting with people excites me.</p></section>
<section id="thoughts"><h2>Thoughts</h2><p>“Life is not about waiting for opportunities, it is about creating them.” Determination and honesty make anything possible.</p></section>

<section id="visitor" class="hidden">
  <h2>E_Appointment Visitor Form</h2>
  <form id="appointmentForm" class="form-box">
    <label>Visitor Name* <input type="text" id="vname" required></label>
    <label>Visitor Address <input type="text" id="vaddress"></label>
    <label>From Country <input type="text" id="vcountry"></label>
    <label>Date of Birth <input type="date" id="vdob"></label>
    <label>Virtual Visit Date* <input type="date" id="vdate" required></label>
    <label>Time Availability* <input type="time" id="vtime" required></label>
    <label>Contact Number* 
      <select id="ccode">
        <option value="+91">India (+91)</option>
        <option value="+1">USA (+1)</option>
        <option value="+880">Bangladesh (+880)</option>
        <option value="+92">Pakistan (+92)</option>
        <option value="+94">Sri Lanka (+94)</option>
        <option value="+60">Malaysia (+60)</option>
        <option value="+65">Singapore (+65)</option>
        <option value="+44">UK (+44)</option>
        <option value="+61">Australia (+61)</option>
        <option value="+1">Canada (+1)</option>
      </select>
      <input type="tel" id="vphone" required>
    </label>
    <label>Purpose of Visit
      <select id="vpurpose">
        <option value="Visit Abroad">Visit Abroad</option>
        <option value="Student Visa in Abroad">Student Visa in Abroad</option>
        <option value="Job in Abroad">Job in Abroad</option>
        <option value="Education system in Abroad">Education system in Abroad</option>
        <option value="Counseling for Education in Abroad">Counseling for Education in Abroad</option>
      </select>
    </label>
    <label>Passport Number <input type="text" id="vpassport"></label>
    <label>Email ID 
      <input type="text" id="vemail" placeholder="yourname" required>
      <select id="emaildomain">
        <option value="@gmail.com">@gmail.com</option>
        <option value="@rediffmail.com">@rediffmail.com</option>
        <option value="@yahoo.com">@yahoo.com</option>
      </select>
    </label>
    <button type="submit" class="btn">Submit</button>
  </form>
</section>

<section id="adminLogin" class="hidden">
  <h2>Admin Login</h2>
  <div class="form-box">
    <label>Username <input type="text" id="adminUser"></label>
    <label>Password <input type="password" id="adminPass"></label>
    <button onclick="adminLogin()" class="btn">Login</button>
  </div>
</section>

<section id="adminDashboard" class="hidden">
  <h2>Admin Dashboard</h2>
  <button onclick="adminLogout()" class="btn">Logout</button>
  <table id="visitorTable">
    <thead><tr>
      <th>Appt No</th><th>Name</th><th>Date</th><th>Time</th><th>Contact</th><th>Purpose</th><th>Status</th><th>Action</th><th>Chat</th>
    </tr></thead>
    <tbody></tbody>
  </table>
</section>

<footer>
  <p>© 2025 INDIA BADSAH | Personal Biography Website</p>
  <div id="socialLinks" style="margin-top:10px;text-align:center;">
    <a href="#"><img src="linkedin-icon.png" alt="LinkedIn" width="35"></a>
    <a href="#"><img src="facebook-icon.png" alt="Facebook" width="35"></a>
    <a href="#"><img src="whatsapp-icon.png" alt="WhatsApp" width="35"></a>
    <a href="#"><img src="email-icon.png" alt="Email" width="35"></a>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
let visitors = JSON.parse(localStorage.getItem("visitors")) || {};
let chatMessages = JSON.parse(localStorage.getItem("chatMessages")) || {};

function showSection(id){ document.querySelectorAll("section").forEach(s=>s.classList.add("hidden")); document.getElementById(id).classList.remove("hidden"); }

function getNextAppointmentNumber(){ 
  const keys = Object.keys(visitors); if(keys.length===0) return "APMTWBNB01";
  const nums = keys.map(k=>parseInt(k.replace("APMTWBNB",""))).filter(n=>!isNaN(n));
  return "APMTWBNB" + String(nums.length?Math.max(...nums)+1:1).padStart(2,"0");
}

document.getElementById("appointmentForm").addEventListener("submit",function(e){
  e.preventDefault();
  let name=document.getElementById("vname").value.trim();
  let date=document.getElementById("vdate").value;
  let time=document.getElementById("vtime").value;
  let phone=document.getElementById("vphone").value.trim();
  if(!name||!date||!time||!phone){alert("Please fill mandatory fields"); return;}
  let apptNo=getNextAppointmentNumber();
  visitors[apptNo]={name,date,time,phone:document.getElementById("ccode").value+phone,address:document.getElementById("vaddress").value,country:document.getElementById("vcountry").value,dob:document.getElementById("vdob").value,purpose:document.getElementById("vpurpose").value,passport:document.getElementById("vpassport").value||"NA",email:document.getElementById("vemail").value+document.getElementById("emaildomain").value,status:"Pending",submitted:new Date().toLocaleString(),chatLocked:false};
  localStorage.setItem("visitors",JSON.stringify(visitors));
  alert("Appointment sent successfully: "+apptNo);
  document.getElementById("appointmentForm").reset();
});

function checkStatus(){
  let apptNo=document.getElementById("statusSearch").value.trim();
  let resDiv=document.getElementById("statusResult");
  if(visitors[apptNo]){
    let v=visitors[apptNo];
    let color="pink"; let text="ADMIN BUSY";
    if(v.status==="Accepted"){color="green"; text="APPOINTMENT ACCEPTED";}
    else if(v.status==="Rejected"){color="red"; text="APPOINTMENT REJECTED";}
    resDiv.innerHTML=`<button class="${color}" style="padding:10px 20px;font-size:16px;" disabled>${text}</button>`;
    if(v.status==="Accepted" && !v.chatLocked){
      resDiv.innerHTML+=`<div class="chat-box" id="visitorChatBox"><div id="chatHistory"></div><div class="chat-input"><textarea id="visitorMessage" placeholder="Write message to Admin"></textarea><button class="btn" onclick="sendVisitorMessage('${apptNo}')">Send</button></div></div>`;
      renderChat(apptNo); autoLockChat(apptNo);
    }
  }else{resDiv.innerHTML="No Appointment Found";}
}

function adminLogin(){let u=document.getElementById("adminUser").value; let p=document.getElementById("adminPass").value; if(u==="admin"&&p==="admin"){showSection("adminDashboard");renderTable();}else alert("Invalid Credentials");}
function adminLogout(){showSection("profile");}

function renderTable(){
  let tbody=document.querySelector("#visitorTable tbody");
  tbody.innerHTML="";
  for(let apptNo in visitors){
    let v=visitors[apptNo];
    let acceptClass=v.status==="Accepted"?"deepgreen":"";
    let rejectClass=v.status==="Rejected"?"deepred":"";
    let row=document.createElement("tr");
    row.innerHTML=`<td>${apptNo}</td><td>${v.name}</td><td>${v.date}</td><td>${v.time}</td><td>${v.phone}</td><td>${v.purpose}</td><td>${v.status}</td>
    <td><button class="${acceptClass}" onclick="accept('${apptNo}')" ${v.status!=="Pending"?'disabled':''}>Accept</button>
    <button class="${rejectClass}" onclick="reject('${apptNo}')" ${v.status!=="Pending"?'disabled':''}>Reject</button>
    <button onclick="lockVisitor('${apptNo}')">Lock</button></td>
    <td><button onclick="showAdminChat('${apptNo}')">Chat</button></td>`;
    tbody.appendChild(row);
  }
}

function accept(apptNo){visitors[apptNo].status="Accepted"; localStorage.setItem("visitors",JSON.stringify(visitors)); renderTable();}
function reject(apptNo){visitors[apptNo].status="Rejected"; localStorage.setItem("visitors",JSON.stringify(visitors)); renderTable();}

function sendVisitorMessage(apptNo){
  let msg=document.getElementById("visitorMessage").value.trim();
  if(!msg) return;
  if(!chatMessages[apptNo]) chatMessages[apptNo]=[];
  chatMessages[apptNo].push({sender:"Visitor",message:msg,time:new Date().toLocaleTimeString()});
  localStorage.setItem("chatMessages",JSON.stringify(chatMessages));
  document.getElementById("visitorMessage").value="";
  renderChat(apptNo);
}

function renderChat(apptNo){
  let chatDiv=document.getElementById("chatHistory");
  if(!chatDiv) return;
  chatDiv.innerHTML="";
  if(chatMessages[apptNo]){
    chatMessages[apptNo].forEach(m=>{chatDiv.innerHTML+=`<div><strong>${m.sender}:</strong> ${m.message} <em>${m.time}</em></div>`;});
  }
}

function showAdminChat(apptNo){
  let msg=prompt("Reply to Visitor");
  if(msg){
    if(!chatMessages[apptNo]) chatMessages[apptNo]=[];
    chatMessages[apptNo].push({sender:"Admin",message:msg,time:new Date().toLocaleTimeString()});
    localStorage.setItem("chatMessages",JSON.stringify(chatMessages));
  }
}

function lockVisitor(apptNo){
  let v=visitors[apptNo];
  if(!v) return;
  let meetDateTime=new Date(v.date+" "+v.time);
  let now=new Date();
  if(now>=meetDateTime){v.chatLocked=true; localStorage.setItem("visitors",JSON.stringify(visitors)); alert("Visitor Locked Permanently after meeting.");}else{alert("Meeting date/time not passed yet.");}
}

function autoLockChat(apptNo){
  let v=visitors[apptNo];
  if(!v || v.chatLocked) return;
  let meetDateTime=new Date(v.date+" "+v.time);
  let now=new Date();
  if(now>=meetDateTime){v.chatLocked=true; localStorage.setItem("visitors",JSON.stringify(visitors)); document.getElementById("visitorChatBox").classList.add("hidden");}
}

// ------------------- PDF Generation -------------------
function downloadPDF(apptNo){
  const { jsPDF } = window.jspdf;
  const v = visitors[apptNo];
  if(!v){ alert("No appointment found"); return; }
  const doc = new jsPDF();
  const currentDate = new Date();
  const dateStr = currentDate.toLocaleDateString();
  const timeStr = currentDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });
  doc.setFontSize(16);
  doc.text("E_Appointment Letter", 20, 20);
  doc.setFontSize(12);
  doc.text(`Visitor: ${v.name}`, 20, 30);
  doc.text(`Visit To: BHOLA NATH BASAK`, 20, 38);
  doc.text(`Address: ${v.address}`, 20, 46);
  doc.text(`Country: ${v.country}`, 20, 54);
  doc.text(`DOB: ${v.dob}`, 20, 62);
  doc.text(`Visit Date: ${v.date}`, 20, 70);
  doc.text(`Visit Time: ${v.time}`, 20, 78);
  doc.text(`Contact: ${v.phone}`, 20, 86);
  doc.text(`Purpose: ${v.purpose}`, 20, 94);
  doc.text(`Passport: ${v.passport}`, 20, 102);
  doc.text(`Email: ${v.email}`, 20, 110);
  doc.text(`Status: ${v.status}`, 20, 118);
  doc.text(`Generated on: ${dateStr} ${timeStr}`, 20, 126);
  doc.save(`E_Appointment_${apptNo}.pdf`);
}
</script>
</body>
</html>
